<h1 align="center">Little Pont</h1>
<h2 align="center">Immersive Role Play Village</h2>

- - - 
![Responsive Mockup]()


# Little Pont

This project was designed for Milestone Project 4 of Code Institutes' Level 5 Diploma in Web Development.

Little Pont is fantastic new business that is about to launch in the village of Ponteland, Northumberland. 
A lack in services for young children and families in the village of Ponteland, led a group of enthusiastic mothers (all with early years and/or teaching experience) to get together and start this exciting new venture. 

Little Pont is a child-sized village that has been modelled upon the actual village of Ponteland so that the businesses and buildings are familiar to the children. Here, children can can learn about the different business in their communities, and how the various services and businesses help to keep the the village vibrant! 
This role play environemnt promotes hands-on experiential learning for children to learn how people live and work together. Children will have the opportunity to role play different occupations and practice everyday life skills.

Little Pont also teaches Science, Technology, Engineering and Mathematics (STEM) in each session. Each Class has an exciting, practical STEM learning activity taught by one of our fantastic team,and designed to be age-specific to the group. Classes are booked based upon the age of the child but siblings are welcome to come along and get involved as well! Little Pont is family and community-orientated and its ethos is to provide a safe, fun and educational place for children and families to come together within their community to learn, play and socialise together. 

The Little Pont team are looking to launch their business with the aid of a brand new website. Ponteland and its surrounding areas are highly affluent, and they want the website to appeal to this local community. The website must be easy to access and simple to use. It needs to look professional and aesthetic but also fun and playful. 

This website has been built using HTML, CSS, Javascript and Python.

[View the live project here.](https://little-pont-role-play-855c26627652.herokuapp.com/)

## Contents

* [Languages Used](#languages-used)
* [User-Experience-Design](#user-experience-design)
    * [User Stories](#user-stories)
* [Design](#design)
  * [Color Scheme](#color-scheme)
  * [Typography](#typography)
  * [Imagery](#imagery)
  * [Wireframes](#wireframes)
  * [Database Schema](#database-schema)
* [Structure](#design)
  * [Features](#features)
  * [Features For Future Implementation](#features-for-future-implementation)
* [Technologies Used](#technologies-used)
  * [ Frameworks, Libraries & Programs Used](#frameworks-libraries--programs-used)
* [Testing](#Testing)
* [Deployment](#deployment)
  * [Version Control](#version-control)
  * [Run locally](#run-locally)
* [Credits](#credits)
* [Acknowledgements](#acknowledgements)

- - - 

## Languages Used

*  [HTML5](https://en.wikipedia.org/wiki/HTML5)
*  [CSS3](https://en.wikipedia.org/wiki/Cascading_Style_Sheets)
*  [JS](https://en.wikipedia.org/wiki/JavaScript)
*  [Python](https://en.wikipedia.org/wiki/Python)

![HTML5](https://img.shields.io/badge/html5-orange.svg?style=for-the-badge&logo=html5&logoColor=orange&color=172416&Color=orange)![CSS](https://img.shields.io/badge/css3-blue.svg?style=for-the-badge&logo=css3&logoColor=blue&color=172416&Color=blue)![JS](https://img.shields.io/badge/javascript-yellow.svg?style=for-the-badge&logo=javascript&logoColor=yellow&color=172416&Color=yellow)![Python](https://img.shields.io/badge/python-3670A0?style=for-the-badge&logo=python&logoColor=ffdd54)

- - - 

## User-Experience-Design

-   ### User stories

    -   #### Viewing and Navigation

        1. As a site user, i want to be able to view the website on a range of device size and it needs to be aestheitc and functional
        2. As a parent/guardian, i want to easily understand the purpose of the webite
        3. As a parent/guardian, i want to be able to view course details to understand which course is suitable for my child.
        4. As a parent/guardian, i want to be able to see the available courses, the course dates and times so that i can decide if it is suitable to book.
        4. As a registered site user, i want to view the contents of my shopping basket and be able to add, edit or delete any items in it. 
        5. As a registered site user, i want to have a personlalised profile where i am able to view my order history and update my profile details
        6. As a parent/guardian, i want to be abe to meet the team who run the courses and understand more about them and their qualifications so that i know the sessions are being run by competent pracitioners
        7. As a parent/guardian, i want to be able to see where the courses are being held so that i know where i am going to be travelling to and can plan my journey
        8. As a site user, i want to be able to contact the site owners if i have any queries and recieve email confirmation that my message has been successfully sent
        9. As a parent/guardian, i want to be able to make a party booking enquiry
        
    
    -   #### Registration and User Account

        1. As site user, i want to be able to easily register and account
        2. As a registered user, i want to easily be able to login and logout of my account
        3. As a registered user, i want to be able to recover my password if i have forgotten it
        4. As a registered user, i want to recieve an email to confirm that i have successfully regitered an account
        5. As site admin, i want to ensure all form fields are completed correctly
        6. As a site user i want to be able to edit or update my profile details

    -   #### Purchasing and Checkout
        1. As a parent/guardian, i want to select and purchase a course for my child
        2. As a site user, i want an easy and streamlined payment process
        3. As a site administrator, i want to be able to track all course bookings to ensure that they are processed correctly and payment is recieved

    -   #### Site Administrator

        1. As a site admin, i want to be able to easily add, edit and delete courses so that i have full control over what courses i make available to the user
        2. As a site admin, i want to easily be able to add, edit or delete a users order in case they have made a booking error and it needs to be ammended, in order to provide a good user experience for them.
        3. As an admin, i want to have a clear view of courses, bookings and payment status to ensure good business management
        
- - - 

## Design

-   ### Colour Scheme

    * [Coolors](see [Credits](#credits) for attribution) was used to find a colour palette. The site design needed to be welcoming, colourful and whimsical without being too harsh visually. For this reason a pastel colour palette was chosen as the colours compliment each other whilst having a gentle softness. As the site has elements throughout its pages where the pastels are used, alongside images to create interest, it was decided that in order to maintain a light and bright feel and not overpower the user, to have the background colour of the site as a white or off white. This maintains a professional clean feel to the site overall.

    [Colour Palette](documentation/readme/images/colour_palette.png)

-   ### Typography

    * From Google Fonts, 'Amatic SC' was chosen for the sites titles. A simple hand-drawn effect, is is playful yet it is very clear and legible. The site is designed to be fun and this suits this design perfectly. The rest of the sites font is 'Roboto', chosen as it is also a simple, clear and open font but without the sharp edges of other font types. The curves on the font fit in with the curves created by the borders on the site and feels warmer, friendlier and less strict.

    [Font](documentation/readme/images/colour_palette.png)

-   ### Imagery

    * Images were predominently taken from Freepix (see [Credits](#credits) for attribution). A mixture of photos and cartoons were used as it was felt this would be appealing to the site purpose and immediately support the sites purpose.
    * The main site header uses a fun and colourful 'sky and cloud' background to compliment the site logo. The site logo was designed using Canva(see [Credits](#credits) for attribution). Little Pont is a role play town and the logo reflect this. It consists of a colourful cartoon town against a circular white background which displays the site title.

-   ### Wireframes

    * [Home page](documentation/readme/images/about_us_wf.png) (desktop)
    * [Home page]() (tablet device)
    * [Home page]() (mobile device)
    * [Login page](documentation/readme/images/login_wf.png) (desktop)
    * [Register dropdown](documentation/readme/images/register_login_dropdown_wf.png) (desktop)
    * [Register page](documentation/readme/images/register_page_wf.png) (desktop)
    * [Register Success](documentation/readme/images/register_success_wf.png) (desktop)
    * [Logout page](documentation/readme/images/logout_wf.png) (desktop)
    * [Shopping Bag page](documentation/readme/images/shopping_bag_wf.png) (desktop)
    * [Shopping Bag page]() (tablet device)
    * [Shopping Bag page]() (mobile device)
    * [All Courses page]() (desktop)
    * [Courses dropdown menu](documentation/readme/images/courses_dropdown_wf.png)
    * [All Courses page]() (tablet device)
    * [All Courses page]() (mobile device)
    * [Babies Course page](documentation/readme/images/babies_course_wf.png) (desktop)
    * [Babies Course page]() (tablet device)
    * [Babies Course page]() (mobile device)
    * [Toddler Course page](documentation/readme/images/toddler_course_wf.png) (desktop)
    * [Toddler Course page]() (tablet device)
    * [Toddler Course page]() (mobile device)
    * [Preschool Course page](documentation/readme/images/preschool_course_wf.png) (desktop)
    * [Preschool Course page]() (tablet device)
    * [Preschool Course page]() (mobile device)
    * [Early Years Course page](documentation/readme/images/early_years_course_page.png) (desktop)
    * [Early Years Course page]() (tablet device)
    * [Early Years Course page]() (mobile device)
    * [Course Management page](documentation/readme/images/course_management_wf.png) (desktop)
    * [Course Management page]() (tablet device)
    * [Course Management page]() (mobile device)
    * [My Profile page page](documentation/readme/images/my_profile_wf.png) (desktop)
    * [My Profile page page]() (tablet device)
    * [My Profile page page]() (mobile device)
    * [Instructor Info page](documentation/readme/images/instructor_info_wf.png) (desktop)
    * [Instructor Info page]() (tablet device)
    * [Instructor Info page]() (mobile device)
    * [Instructor Detail page](documentation/readme/images/instructor_detail_wf.png) (desktop)
    * [Instructor Detail page]() (tablet device)
    * [Instructor Detail page]() (mobile device)
    * [Team Management page](documentation/readme/images/team_management_wf.png) (desktop)
    * [Team Management page]() (tablet device)
    * [Team Management page]() (mobile device)
    * [Cafe page](documentation/readme/images/cafe_wf.png) (desktop)
    * [Cafe page]() (tablet device)
    * [Cafe page]() (mobile device)
    * [Checkout page](documentation/readme/images/checkout_wf.png) (desktop)
    * [Checkout page]() (tablet device)
    * [Checkout page]() (mobile device)
    * [Booking Enquiry page]() (desktop)
    * [Booking Enquiry page]() (tablet device)
    * [Booking Enquiry page]() (mobile device)
    * [Verify Email](documentation/readme/images/verify_email_wf.png) (desktop)
    * [Toast example](documentation/readme/images/success_message_wf.png)

-   ### Database Schema
    * The database was designed using Lucid Chart(see credits). 
    * [EDR diagram](testing/images/ERD.png)
    * There are 7 tables within this relational database:  User, User Profile, Order, Order Line Item, Course, Instructor and Enquiry. Instructor has a one-to-many relationship with the Cuurse model. User Profile has a one-to-many relatiomship with Enquiry. 
    
- - - 

## Structure

There are 7 main apps within Little Pont: home, profiles, products, bag, checkout, instructor and contact which make up the full site. All templates within these apps are extended from a base template. The base template comprises of the navigation bar and footer. Below is a breakdown of the main site features.

-   ### Features 

    * Responsive on device sizes with media screen size >280px so user can easily view site on mobile, tablet, laptop and desktop without any compromise.

-   ### Features used in every page:

    -   #### Favicon
        * The site favicon was designed using favicon.io (see credits). It was designed to include the site logo to make the website identifiable from the tab.

    -   #### Navigation Bar

       [Navigation Bar - desktop](documentation/readme/images/nav_bar_desktop.png)
       [Navigation bar - dropdown example](documentation/readme/images/courses_dropdown_wf.png)

       * The responsive navbar features a hamburger menu on medium sized devices and smaller. This displays the Home, About, Courses and Contact dropdown/links. A bright and colourful site logo and header is included with each page. This is to catch the eye of the user and their children and entice them to use the business. The Account and Shopping Bag icons remain the same on all devices so they are easily accessible to the user.

       [Navigation Bar- mobile device ]()
       [Navigation Bar- mobile device- hamburger menu open]()

    -   #### Scroll Button
        * Javascript was used to create the functionality for this feature. 
        * The scroll to top button is shown on each page to improve user experience. The user is able to quickly and smoothly navigate back to the top of the page by clicking the button. 
        * The button changes colour on mouse-hover.
    
    -   #### Footer

        * Responsive design, shown on each page
        * Features the site Title, links to the Register/Login pages and social links.
        * Each link is clickable and increases ease of navigation around site.

        [Footer](documentation/readme/images/footer.png)
        [Footer - mobile device]()

-   ### Features in main content:

    -   #### Hero Images

        * Each of the main site pages have a large hero image which gives the user a bit of information about what the page purpose is. Its purpose is also to add colour and interest to these pages to maintain interest.
    
    Main Content

    -   #### Home page
        * App: home
        * This page has a large colourful hero image of a happy girl dressed uo as a chef. This will hopefully give the site user intstant information about the role play element of Little Pont and some idea of what to expect when visiting the business. The Home page comprises of header/navbar, hero image, footer and then two main information sections: About Us and What We Offer.
        
        [Home page](documentation/readme/images/home.png)
        [Home page- About Us](documentation/readme/images/about_us.png)
        [Home page- What We Offer](documentation/readme/images/what_we_offer.png)

    -   #### My Profile page
        * App: profiles
        * Shows the users saved details and any order history
        
        [Profile page]()

    -   #### Courses page
        * App: products
        * Filters list of courses according to name, strat date or start time and user can select if they want list in ascending or descending order.
        * Displays all of the available courses, specifically: Course name, Start Date, End Date, Start Time, Price and Instructor.
        * The title is a link to the age specific course page.
        * Edit and Delete buttons are available to site administrators to allow for course management. 
        * Delte button deletes the chosen course and the Courses page is reloaded with a success message to infor superuser that the course has been successfully deleted.

        [All Courses page including header](documentation/readme/images/all_courses.png)
        [All courses page](documentation/readme/images/all_courses_two.png)

    -   #### Courses detail pages
        * App: products
        * Each age group has its own specific page: Babies, Toddlers, Preschool and Early Years
        * There is information about the benefits of each course for the child
        * Displays a list of the age specific courses available. User can select a course which changes the colour of the star icon. A quantity of the course selected can be updated before user clicks Book Now button.
        * A success toast is shown when the user has successfully added a course to their shopping basket- it displays an order summary of the product added. 

        [Course Detail page]()

    -   #### Course Management page
        * App: products
        * Allows site administrators to add a new course
        * A form prompts the user to complete the relevent details. Option to Cancel or Add Course.
        * Success toast displayed when a Course is successfully added. User is redirected to Courses page to view all courses.

        [Course Management page](documentation/readme/images/course_management.png)
        [Course Managemnt page- end of form and buttons](documentation/readme/images/course_management_two.png)

    -   #### Instructor Info page
        * App: instructor
        * Displays each instructor as their image and an image overlay with their name and sopeciality age group
        * The button on each overlay take the user to the instructor detail page for more detail about the chosen instructor

        [Instructor info page]()

    -   #### Instructor Detail page
        * App: instructor
        * Displays specific information about the chosen instructor.
        * An Edit and Delete button is displayed for site administrators. Delete button will delete the Instructor and take the superuser back to the Instructor infor page.

        [Instructor Detail page]()

    -   #### Team Management page
        * App: instructor
        * A form to allow a site administrator to add a new instructor

        [Team management page](documentation/readme/images/team_management.png)
        [Team Management - lower form and buttons](documentation/readme/images/team_management2_two.png)

    -   #### Edit Instructor 
        * App: instructor
        * Once superuser clicks Edit button on Instructor detail page they are taken to the Edit instructor page.
        * Here there is a prepopulated form where they are able to edit the details.
        * Cancel or Save the edit

        [Edit instructor page]()

    -   #### Shopping Bag page
        * App: bag
        * Displays a list of the users' shopping bag contents, specifically the Course Name, Start Time, Price, Quantity and Subtotal. 
        * The User has the ability to update the quanitty of each shopping bag item from this page or to remove an item.
        * The subtotal and total are updated following any adjustments to the shopping bag contents.
        * Option to go to the Courses page to view all courses or to continue onto checkout by clicking Secure Checkout button.

        [Shopping Bag page]()

    -   #### Checkout page
        * App: checkout
        * Comprises a form for the user to complete with their billing and card details and the order summary
        * Option for registered and logged in users to save their details to their profile
        * Option to go back to the shopping bag page to adjust the bag contents or to click Secure Checkout button

        [Checkout page]()

    -   #### Checkout Success page
        * App: checkout
        * A loading overlay appears on form submission to give the user some feedback that their order is being processed
        * A successful checkout takes the user to the checkout success page which displays their order summary details
        * A success toast is shown with details of the order that has been successfully processed and to inform that an email has been sent to their registered email address. 

        [Chckout Success page]()

    -   #### Enquiry Form
        * App: contact
        * User is directed to complete the booking enquiry form
        * Option to Cancel or Send booking enquiry
        * A successful booking enquiry will redirect user back to home page with a success message. An error toast will show if there are any issues with form submission.

        [Contact page]()

    -   #### Cafe page
        * A simple informational page with a list of drinks and foods on offer in Little Pont
        * Added for site authenticity
        * Scope to add more functionality in the future e.g. pre-order food etc

        [Cafe page]()

    -   #### Register page
        * User is prompted to complete the registration form
        * Link to login page if user already registered.
        * Success toast when successfully submitted form, user taken to Verify Email page with instructions on how to verify email

        [Register page]()

    -   #### Login page
        * A form for user to complete their login details and login to enter full site.
        * Success toast shown when user successfully logs in

        [Login page]()

    -   #### Logout page
        * Asks user if they are sure they wish to logout and allows user to either navigate back to site or continue to log out

        [Logout page]()



-   ### Features For Future Implementation
    *  I had planned on adding a Frequently Asked Questions(FAQs) section to add more information to the site in a user friendly and succinct way. This would be different to how the rest of the site information is presented. I feel that this would have increased user satisfaction. 
    * In the future I would like to add Booking/Contact/Enquiry Form links directly from their social media accounts as i think a lot of the site users/parents would find out about our business via their socials.
    * A potential future feature would be to create a new app to incorporate the cafe aspect of the business, and to allow pre-ordering of food. This would help support the business as Little Pont would be able to prepare stock and reduce wastage.
    
- - - 

## Technologies Used

-   ### Frameworks, Libraries & Programs Used

    * [Google Fonts](https://fonts.google.com/) were used to import the '' font into the style.css file which is used on all pages throughout the project. 
    * [Bootstrap v5.3.2](https://getbootstrap.com/docs/versions/) was used on all pages throughout the website to add icons for aesthetic and UX purposes
    * [Gitpod](https://www.gitpod.io/) - the IDE used to build the project. Git was used for version control.
    * [GitHub](https://github.com/) - used to store the projects code after being pushed from Git.
    * [Balsamiq](https://balsamiq.com/) - used to create the wireframes to support in the design process.
    * [Django](https://www.djangoproject.com/) - a Python web framework that facilitates development
    * [Jinja](https://jinja.palletsprojects.com/en/3.1.x/) - templating engine
    * [Amazon Web Services(AWS)](https://aws.amazon.com/free/?gclid=CjwKCAjwufq2BhAmEiwAnZqw8ho-9BEQWuP1mG3bVw8b8QfPKNQPmmMgMUKtBKP6w2Io6FsdeIuW7hoC4RUQAvD_BwE&trk=d5254134-67ca-4a35-91cc-77868c97eedd&sc_channel=ps&ef_id=CjwKCAjwufq2BhAmEiwAnZqw8ho-9BEQWuP1mG3bVw8b8QfPKNQPmmMgMUKtBKP6w2Io6FsdeIuW7hoC4RUQAvD_BwE:G:s&s_kwcid=AL!4422!3!433803620861!e!!g!!amazon%20web%20services!1680401428!67152600204&all-free-tier.sort-by=item.additionalFields.SortRank&all-free-tier.sort-order=asc&awsf.Free%20Tier%20Types=*all&awsf.Free%20Tier%20Categories=*all) - for storage of media and static files
    * [Stripe](https://stripe.com/gb?utm_campaign=EMEA_UK_en_Google_Search_Brand_Stripe_EXA-2032860449&utm_medium=cpc&utm_source=google&ad_content=604272871169&utm_term=stripe&utm_matchtype=e&utm_adposition=&utm_device=c&gad_source=1&gclid=CjwKCAjwufq2BhAmEiwAnZqw8riFsJTT2orxv4FliKPuXltLnE4nJ0wXBeXdVGAuXj2y6-UyKyoughoCi78QAvD_BwE) APIs to manage site payments
    * [Pip](https://pypi.org/project/pip/) - tool for installing python packages
    * [Lucid Chart](https://lucid.app/lucidchart/c05f73cc-9dcc-4449-bd72-3098abe54692/edit?invitationId=inv_1c31fd92-4378-45d3-93c0-a252029cd87d&page=0_0#) was used to design the EDR model when planning the database
    * [Heroku](https://www.heroku.com) - for site deployment. 
    * [Database Maker CI](https://dbs.ci-dbs.net/)- used to create a database
    * [Shields.io](https://shields.io/badges) - used for the shields used within the Readme
    * [Favicon.io](https://favicon.io/) - used to design the favicon for the site
    * [Chrome Developer Tools](https://developer.chrome.com/docs/devtools) - used throughout, to troubleshoot, solve bugs, test site features and responsiveness
    * [amiresponsive](https://ui.dev/amiresponsive) - used to create the responsive screen imagery for the site

    **Within the Requirements.txt file**
    - `asgiref==3.8.1` - provide an interface between async-capable web servers, frameworks, and applications
    - `boto3==1.35.7` - AWS Software Development Kit for Python
    - `botocore==1.35.7` - interface to a growing number of Amazon Web Services
    - `dj-database-url==0.5.0` - simple Django utility allows for using database URLS
    - `Django==3.2.25` - Python Framework
    - `django-allauth==0.54.0` - reusable Python library for implementing OAuth1 and OAuth2 providers
    - `django-countries==7.2.1` - application that provides country choices for use with user profile forms in this application
    - `django-crispy-forms==1.14.0` - Python package that styles the Django forms with the help of built-in template packs
    - `django-storages==1.14.4` - collection of custom storage backends for Django
    - `gunicorn==23.0.0` - WSGI compliant web server for Python Applications in production
    - `jmespath==1.0.1` - allows specifification on how to extract elements from a JSON document.
    - `oauthlib==3.2.2` - framework which implements the logic of OAuth1 or OAuth2
    - `pillow==10.4.0` - Python library that provides methods for opening, manipulating, and saving image file formats
    - `psycopg2==2.9.9` - PostgreSQL database adapter
    - `PyJWT==2.9.0` - Python library which allows you to encode and decode JSON Web Tokens
    - `python3-openid==3.2.0` - standardizes the process for authenticating and authorizing users when they sign in to the site
    - `pytz==2024.1` - timezone calculations
    - `requests-oauthlib==2.0.0` - OAuth library support for Requests
    - `sqlparse==0.5.1` - support for parsing, splitting and formatting SQL statements
    - `stripe==10.8.0` - library for Stripe's API. To handle payment functionality

- - - 

## Testing

Extensive testing was carried out on this project. Please review [Testing.md](TESTING.md) for all testing performed.

- - - 

## Deployment

-   ### Version Control

This website was created using the CI full template (https://github.com/Code-Institute-Org/ci-full-template)

#### Database creation

To create the database:
1. Navigate to the CI Database Maker(https://dbs.ci-dbs.net/) which creates a new PostgreSQL database.
2. Type in your email address into the input field as directed and click submit
3. You will recieve an email with the new PostgreSQL instance. Keep these details safe, they will be used shortly.

#### Heroku
To deploy Little Pont to Heroku, take the following steps:
1. Create a requirements.txt file using the terminal command `pip freeze > requirements.txt`
2. Create a Procfile with the terminal command `echo web: python app.py > Procfile`. Ensure you use a capital 'P' for this file.
3. `git add` and `git commit` these changes and `git push` to GitHub repository
4. Go to the Heroku website and login. Create a new app by clicking the "New" button in your dashboard.
5. Give the app and name and set the region to Europe(or your closest region)
6. From the heroku dashboard of the new app, click on "Deploy" > "Deployment method" and select Github
7. Confirm the link to the correct GitHub repository
8. In the heroku dashboard for the application. click on the "settings" > "Reveal Config Vars"
9. Ensure these config vars in the final setup:

| Key                   | Value             |
|-----------------------|-------------------|
| AWS_ACCESS_KEY_ID     | 'AWS_ID'          |
| AWS_SECRET_ACCESS_KEY | 'AWS_SECRET'      |
| DATABASE_URL          | 'DB_URL'          |
| EMAIL_HOST_PASSWORD   | 'EMAIL_HOST_PASS' |
| EMAIL_HOST_USER       | 'EMAIL_HOST_USER' |
| SECRET_KEY            | 'SECRET_KEY'      |
| STRIPE_PUBLIC_KEY     | 'STRIPE_PUBLIC'   |
| STRIPE_SECRET_KEY     | 'STRIPE_SECRET'   |
| STRIPE_WH_SECRET      | 'WH_SECRET'       |
| USE_AWS               | True              |

(this is an example, actual env variable not disclosed to maintain security. To get the db url follow [CI PosgreSQL]())

10. In the Heroku dashboard, click "Deploy"
11. In the "Manual Deployment" section, ensure the main branch is selected then click "Deploy Branch"


#### Connect new DB to Heroku app
1. In the terminal, install dj_database_url and psycopg2, both of these are needed to connect to your external database.

2. pip3 install dj_database_url==0.5.0 psycopg2
3. Update your requirements.txt file with the newly installed packages

4. pip freeze > requirements.txt
5. In your settings.py file, import dj_database_url underneath the import for os
```
 import os
 import dj_database_url
```
6. Scroll to the DATABASES section and update it to the following code, so that the original connection to sqlite3 is commented out and we connect to the new database instead. Paste in the database URL from your PostgreSQL from Code Institute email as below (do not commit these changes)
```
#DATABASES = {
#     'default': {
#          'ENGINE': 'django.db.backends.sqlite3',
#          'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
#      }
#  }
     
 DATABASES = {
     'default': dj_database_url.parse('your-database-url-here')
 }
``` 
7. In the terminal, run the showmigrations command to confirm you are connected to the external database
```
python3 manage.py showmigrations
```
you should see a list of all migrations
8. Migrate your database models to your new database
```
 python3 manage.py migrate
```
9. Create a superuser- follow the stps after entering the following command
```
 python3 manage.py createsuperuser
```
10. Revert changes made in step 8.
11. Update cose in settings.py as follows:
```
if 'DATABASE_URL' in os.environ:
    DATABASES = {
        'default': dj_database_url.parse(os.environ.get('DATABASE_URL'))
    }
else:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3',
            'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
        }
    }
```
12. Install gunicorn and add to requirements:
```
pip3 install gunicorn
pip3 freeze > requirements.txt
```
13. Within the Procfile add `web: gunicorn app-name.wsgi:application` (add app name where indicated), this tells Heroku to create a web dyno and serve our django app.
14. Go to local CLI and login to Heroku using `heroku login -i` and enter heroku login details (email and password from Required Authenitcations within the Applications section). 
15. temporarily disable collect static. This tells Heroku not to collect static files when we deploy:
```
heroku config:set DISABLE_COLLECTSTATIC=1 --app heroku-app-name-here
```
16. Add the Heroku app and localhost (which will allow GitPod to still work) to ALLOWED_HOSTS = [] in settings.py:
```
ALLOWED_HOSTS = ['heroku deployed site URL here', 'localhost' ]
```

17. Initialise Heroku git remote to app by typing the following command:
```
heroku git:remote -a <name_of_your_app>
```
18. Then push to heroku
```
git push heroku
```
19. Save, add, commit and push the changes to GitHub. You can then also initialize the Heroku git remote in the terminal and push to Heroku with:
```
heroku git:remote -a {app name here}
git push heroku main
```
You should now be able to see the deployed site (without any static files as we haven't set these up yet).
20. Set app up to automatically deploy when we push to github. Go to Heroku and click 'Depoly' tab. Click Github option and search for github repo in input field. Once found, click connect. Now click 'Enable autmatic deploys'
21. Generate a Django secret key using a secret key generator. Add this in config vars in Heroku.
22. Add changes to settings.py:
```
SECRET_KEY = os.environ.get('SECRET_KEY', '')
DEBUG = 'DEVELOPMENT' in os.environ
```

#### Amazon Web Services (AWS)
Setup instructions taken from CI.
Next, set up AWS which is used to host the sites static and media files as Heroku is unable to host them.

##### Create an S3 Bucket
1. Create account [here](https://aws.amazon.com/).
2. Login using Root to access the AWS console.
3. Search for and select 'S3'.
4. Click 'Create Bucket'.
5. Type in a bucket name and select closest region to you.
6. Enter a bucket name (this should relate to your Heroku app name), and select the region closest to you
7. Uncheck 'Block all public access' and acknowledge that the bucket will be public, click 'ACLs enabled' and 'Bucket owner preferred', click 'Create bucket'
8. Click the bucket instance you just created and navigate to the Properties tab
9. Scroll down to 'static website hosting' and click 'use this bucket to host a website'
10. Enter default values of index.HTML for the Index document, and error.HTML for the Error document then click 'Save'
11. On the Permissions tab paste the following code into the CORS configuration editor and then click 'Save': 
    ```
    [
    {
        "AllowedHeaders": [
            "Authorization"
        ],
        "AllowedMethods": [
            "GET"
        ],
        "AllowedOrigins": [
            "*"
        ],
        "ExposeHeaders": []
    }
    ]
    ```
12. For the Access control list (ACL) section, click edit and enable List for Everyone (public access) and
accept the warning box. If the edit button is disabled, you need to change the Object Ownership
section above to ACLs enabled.
13. In the services tab navigate to IAM(Identify and Access Management). Click User Group and then Create Group. Follow the instructions to create the group.
14. Create an S3 bucket Policy and add it. Copy the ARN from the Amazon resource tab and paste into the bucket policy where directed. To attach the policy, on the sidebar, click User Groups. Select your group, go to the permissions
tab, open the Add permissions dropdown, and click Attach policies. Select the policy and click add permissions at the bottom.
15. Copy the policy and paste it into the bucket policy editor and add '/*' to the end of the resourse ARN to allow access to all resources in the bucket, it should look similar to this:
```
{
    "Version": "2012-10-17",
    "Id": "Policynumber",
    "Statement": [
        {
            "Sid": "Stmt1724847378401",
            "Effect": "Allow",
            "Principal": {
                "AWS": "*"
            },
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::chosen-name/*"
        }
    ]
}
```
16. Within the permissions tab, grant Public Access to 'Everyone'
17. Next, to retrieve the access key go to IAM and select 'Users'
18. Select the user for whom you wish to create a CSV file.
19. Select the 'Security Credentials' tab
20. Scroll to 'Access Keys' and click 'Create access key'
21. Select 'Application running outside AWS', and click next
22. On the next screen, you can leave the 'Description tag value' blank. Click 'Create Access Key'
22. Click the 'Download .csv file' button

##### Connect Django and S3 bucket
1. Install boto3 and django storages and freeze them to the requirements.txt file.
```
pip3 install boto3
pip3 install django-storages
pip3 freeze > requirements.txt
```
2. In settings.py add `'storages',` to installed apps
3. To use our bucket if we are using the deployed site, in settings.py add the following:
```
if 'USE_AWS' in os.environ:
    AWS_S3_OBJECT_PARAMETERS = {
        'Expires': 'Thu, 31 Dec 2099 20:00:00 GMT',
        'CacheControl': 'max-age=9460800',
    }
    
    AWS_STORAGE_BUCKET_NAME = 'enter your bucket name here'
    AWS_S3_REGION_NAME = 'enter the region you selected here'
    AWS_ACCESS_KEY_ID = os.environ.get('AWS_ACCESS_KEY_ID')
    AWS_SECRET_ACCESS_KEY = os.environ.get('AWS_SECRET_ACCESS_KEY')
    AWS_S3_CUSTOM_DOMAIN = f'{AWS_STORAGE_BUCKET_NAME}.s3.amazonaws.com'
```
4. Update Heroku config vars(see Heroku deployment section), remove the DISABLE_COLLECTSTATIC variable.
5. Create a file called custom_storages.py in the root, add imports and custom classes. These will tell the app the location to store static and media files:
```
from django.conf import settings
from storages.backends.s3boto3 import S3Boto3Storage


class StaticStorage(S3Boto3Storage):
    location = settings.STATICFILES_LOCATION


class MediaStorage(S3Boto3Storage):
    location = settings.MEDIAFILES_LOCATION
```

6. To let the app know where to store static and media files, and to override the static and media URLs in production, add to settings.py: 
```
STATICFILES_STORAGE = 'custom_storages.StaticStorage'
STATICFILES_LOCATION = 'static'
DEFAULT_FILE_STORAGE = 'custom_storages.MediaStorage'
MEDIAFILES_LOCATION = 'media'

STATIC_URL = f'https://{AWS_S3_CUSTOM_DOMAIN}/{STATICFILES_LOCATION}/'
MEDIA_URL = f'https://{AWS_S3_CUSTOM_DOMAIN}/{MEDIAFILES_LOCATION}/'
```
7. Save, add, commit and push these changes to make a deployment to Heroku. In the build log you will see that the static files were collected, and in our S3 bucket we can see the static folder with all the static files in it.
8. Navigate to S3 and open the bucket. Create folder and name it 'media', to store all the media files for the site. Add media files for site by clicking upload and choosing the relevant files.

#### Correct settings.py configuration
1. Ensure the following final setup within the settings.py file looks like this:
```
STATIC_URL = '/static/'
STATICFILES_DIRS = (os.path.join(BASE_DIR, 'static'),)

MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')

if 'USE_AWS' in os.environ:
     # Cache control
    AWS_S3_OBJECT_PARAMETERS = {
        'Expires': 'Thu, 31 Dec 2099 20:00:00 GMT',
        'CacheControl': 'max-age=94608000',
    }
    
    # Bucket Config
    AWS_STORAGE_BUCKET_NAME = 'your-app-name'
    AWS_S3_REGION_NAME = 'your-local-region'
    AWS_ACCESS_KEY_ID = os.environ.get('AWS_ACCESS_KEY_ID')
    AWS_SECRET_ACCESS_KEY = os.environ.get('AWS_SECRET_ACCESS_KEY')
    AWS_S3_CUSTOM_DOMAIN = f'{AWS_STORAGE_BUCKET_NAME}.s3.amazonaws.com'

    # Static and media files
    STATICFILES_STORAGE = 'custom_storages.StaticStorage'
    STATICFILES_LOCATION = 'static'
    DEFAULT_FILE_STORAGE = 'custom_storages.MediaStorage'
    MEDIAFILES_LOCATION = 'media'

    # Override static and media URLs in production
    STATIC_URL = f'https://{AWS_S3_CUSTOM_DOMAIN}/{STATICFILES_LOCATION}/'
    MEDIA_URL = f'https://{AWS_S3_CUSTOM_DOMAIN}/{MEDIAFILES_LOCATION}/'

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# Stripe
STRIPE_CURRENCY = 'gbp'
STRIPE_PUBLIC_KEY = os.getenv('STRIPE_PUBLIC_KEY', '')
STRIPE_SECRET_KEY = os.getenv('STRIPE_SECRET_KEY', '')
STRIPE_WH_SECRET = os.getenv('STRIPE_WH_SECRET', '')


if 'DEVELOPMENT' in os.environ:
    EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'
    DEFAULT_FROM_EMAIL = 'your-default-email'
else:
    EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
    EMAIL_USE_TLS = True
    EMAIL_PORT = 587
    EMAIL_HOST = 'smtp.gmail.com'
    EMAIL_HOST_USER = os.environ.get('EMAIL_HOST_USER')
    EMAIL_HOST_PASSWORD = os.environ.get('EMAIL_HOST_PASSWORD')
    DEFAULT_FROM_EMAIL = os.environ.get('EMAIL_HOST_USER')
```

-   ### Run locally

**Fork**
1. Login or Sign Up to GitHub.
2. Open the project [Repository](https://github.com/ChloeL-E/little-pont-msp4.git).
3. Click the Fork button in the top right corner.
4. You should now have a copy of the repository in your Github

**Local Clone**
1. Login or Sign Up to GitHub.
2. Open the project [Repository](https://github.com/ChloeL-E/little-pont-msp4.git).
3. Click on the code button, select whether you would like to clone with HTTPS, SSH or GitHub CLI and copy the link shown.
4. Open the terminal in the code editor of your choice and change the current working directory to the location you want to use for the cloned directory. 
5. Type 'git clone' into the terminal and then paste the link you copied in step 3. Press enter.
6. Set up the working environment (not necessary if using the CI Gitpod template as this is already set up for you)
7. Run `pip install -r requirements.txt` in the terminal to install the packages
8. Everything should now be set up locally

- - - 

## Credits

   ### Content

- [JavaTPoint](https://www.javatpoint.com/time-datatype-in-sql#:~:text=To%20store%20the%20time%20in%20your%20SQL%20tables%2C%20your%20first,%3AMM%3ASS%22%20format) for Time datatype.
- [Sugarloaf and a Cup of Joe](https://www.youtube.com/watch?v=UidskJk0KiE&t=611s) assisted with adding a datepicker within the crispy form by using the simple forms dateinut function and adding this within the view. It renders a datepicker calendar within the start and end date inputs within the Add a Course form. I also needed to add a time picker to make choosing a time easier for the admin. [Django Project](https://forum.djangoproject.com/t/need-help-with-date-time-picker/16988) was helpful in adding the TimeInput function to the form.
- [Devon County Council](https://www.devon.gov.uk/support-schools-settings/send/educational-psychology/resources/devon-psychology-in-action/early-stages-of-cognition-and-learning-birth-to-5-years/), [Teach Early Years](https://www.teachearlyyears.com/learning-and-development/view/thinking-skills) and [Raising Children Network](https://raisingchildren.net.au/toddlers/connecting-communicating/connecting/connecting-with-your-toddler) were all useful when writing each Course paragraph content. 
- [CodexWorld](https://www.codexworld.com/how-to/get-current-year-to-display-dynamic-year-in-copyright-using-javascript/#:~:text=Create%20a%20Date%20object%20and,and%20update%20each%20year%20automatically.) reminded me how to get the current year using javascript for the footer so that the year updates to current year. This will mean that going forward I do not need to update myself manually.
- [Stack Overflow](https://stackoverflow.com/questions/16966383/jquery-change-url-of-form-submit) although an old post, gave me the guidance required to write the jquery for the course booking logic as i eeded some help understanding how to go about constructing the specific URL. On Course Booking form submission, the function gets the course_id of the 'checked' radio button. It then constrcuts the URL correctly, inserting the course_id value. 
- [Stack Overflow](https://stackoverflow.com/questions/9729095/onclick-button-border-color-change) for changing the all-auth styling .active on border-color.
- [FreeFormatter](https://www.freeformatter.com/html-formatter.html) - for tidy html formatting
- [HomeBrew]() to install Heroku CLI
- Content was written by Chloe Livingstone-Evans.
- - - - 

   ### Media Images

- [Image Resizer](https://imageresizer.com/) was used for almost all images to convert to webp format and resize to suitable dimensions.
- [Canva](https://www.canva.com/) for site logo design
- favicon https://favicon.io/favicon-converter/
- image cropper https://www.iloveimg.com/crop-image
- [Freepik](https://www.freepik.com/) provided most of the sites images. As follows : 
- [Image by Freepik](https://www.freepik.com/free-vector/sky-background-video-conferencing_9470358.htm#fromView=search&page=1&position=3&uuid=f6fac559-eb3f-4439-a24e-b49bba905c4a) - Background sky image in header
- [Image by brgfx on Freepik](https://www.freepik.com/free-vector/street-side-scene-with-ice-cream-shop-coffee-shop-scene_11690442.htm#fromView=search&page=1&position=46&uuid=67fbc153-5ff9-490e-a435-f8a34fa50f09) - Part of logo design
- [Image by brgfx on Freepik](https://www.freepik.com/free-vector/cute-girl-cartoon-character-wearing-hat_52764202.htm#fromView=search&page=1&position=23&uuid=76493a98-fb5f-4966-96be-913d90ad33ec)
- [Image by brgfx on Freepik](https://www.freepik.com/free-vector/happy-boy-jumping-cartoon-character_26350172.htm#fromView=search&page=1&position=43&uuid=5c848b89-72ae-4682-ab55-57c631bfe538) - Course character
- [Image by marymarkevich on Freepik](https://www.freepik.com/free-photo/blond-pretty-woman-pink-shirt-smiling-holding-holding-notebooks_27290357.htm#from_view=detail_alsolike) - Instructor image
- [Image by wayhomestudio on Freepik](https://www.freepik.com/free-photo/happy-devoted-woman-keeps-hand-chest-looks-joyfully-away-wears-round-spectacles-formal-white-shirt-gets-positive-news-poses-against-blue-background-with-blank-copy-space-your-promotion_23178344.htm#fromView=search&page=1&position=2&uuid=de9c9535-73e8-4eb1-aa4e-c54899020362) - Instructor image
- [Image by Freepik](https://www.freepik.com/free-photo/portrait-middle-aged-businesswoman_4783027.htm#fromView=search&page=1&position=14&uuid=de9c9535-73e8-4eb1-aa4e-c54899020362) - Instructor image
- [Image by kroshka__nastya on Freepik](https://www.freepik.com/free-photo/young-woman-casual-peach-sweater-backpack-isolated-green-olive-color-wall_13884671.htm#fromView=search&page=5&position=22&uuid=de9c9535-73e8-4eb1-aa4e-c54899020362) - Instructor image
- [Image by freepic.diller on Freepik](https://www.freepik.com/free-photo/happy-child-orange-sweater-plays-with-feather-floor_1471555.htm#fromView=search&page=1&position=13&uuid=ca1fd8df-ee34-4313-a2c0-a88eb8624c1b) - Babies course hero image
- [Image by Freepik](https://www.freepik.com/free-photo/high-angle-view-kids-sitting-inside-tepee_2532376.htm#fromView=search&page=2&position=18&uuid=8eae5d42-30ba-455f-95ef-f7e9c380f526) - Toddlers course hero image
- [Image by Ahk√¢m on FreeIconspng](https://www.freeiconspng.com/img/23499) - 'Image coming soon' placeholder image
- [Image by freepic.diller on Freepik](https://www.freepik.com/free-vector/little-boy-playing-shapes_1250763.htm#fromView=search&page=1&position=36&uuid=874f5ba6-fd8f-4d57-a86b-0e631dd9457b) - Course character
- [Image by Hongqi Zhang (aka Michael Zhang) on Dreamstime]("https://www.dreamstime.com/stock-photos-group-children-uniforms-image18787393") - Home page about us image
- [Image by jcomp on Freepik]("https://www.freepik.com/free-photo/little-boy-playing-with-construction-equipment-white_5395704.htm#fromView=search&page=1&position=1&uuid=3f85583f-23fb-45f7-9318-9bd4d78c8d6e") - Preschool course page hero image
- [Image by freepic.diller on Freepik](I"https://www.dreamstime.com/stock-photo-little-girl-playing-toy-kitchen-chef-hat-apron-cooking-fried-eggs-wooden-toys-young-children-kids-play-cook-image73464053") - Home page hero image
- [Image by brgfx on Freepik]("https://www.freepik.com/free-vector/happy-boy-jumping-cartoon-character_26213866.htm#fromView=search&page=1&position=1&uuid=da42b981-2dc4-4f89-8a41-6b1131c0dac8") - Course character
- [Image by brgfx on Freepik](https://www.freepik.com/free-vector/cute-baby-crawling-cartoon-character_27187597.htm#fromView=search&page=1&position=5&uuid=68a1fe55-d91d-44e6-94ff-5f06659ebe42) - Course character
- [Image by chevanon on Freepik](https://www.freepik.com/free-photo/cup-coffee-with-heart-drawn-foam_999656.htm#fromView=search&page=1&position=16&uuid=6afa55f8-c544-4225-9529-82ee359b6e61) - Cafe Page image

- - - 

## Acknowledgements

-  My family for their patience whilst I enjoyed myself coding.
-  My brilliant mentor Daisy McGee, for her excellent advice, patience and passion for teaching.